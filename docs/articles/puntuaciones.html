<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizando las puntuaciones • comidistar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Visualizando las puntuaciones">
<meta property="og:description" content="comidistar">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@gongcastro">
<meta name="twitter:site" content="@gongcastro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">comidistar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/puntuaciones.html">Visualizando las puntuaciones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gongcastro/comidistar/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualizando las puntuaciones</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gongcastro/comidistar/blob/HEAD/vignettes/puntuaciones.Rmd" class="external-link"><code>vignettes/puntuaciones.Rmd</code></a></small>
      <div class="hidden name"><code>puntuaciones.Rmd</code></div>

    </div>

    
    
<p>En cada una de estas catas a ciegas de <strong>El Comidista</strong> (disponibles en su canal de <a href="https://www.youtube.com/channel/UCoIJrrwXy_mlr1WkC4vaTnA" class="external-link">YouTube</a>) se presenta una serie de productos de marcas industriales a una o dos personas expertas en ese tipo de productos. En los vídeos en los que hay más de una persona puntuando los productos, el equipo de edición asigna al producto la media de las puntuaciones. La base de datos <code>puntuaciones</code> muestra las puntuaciones de cada persona del jurado de forma individual. Ver <code><a href="../reference/puntuaciones.html">?puntuaciones</a></code> para más información sobre esta base de datos.</p>
<p>Primero cargamos los paquetes que necesitaremos:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gongcastro.github.io/comidistar/" class="external-link">comidistar</a></span><span class="op">)</span> <span class="co"># contiene los datos y funciones ayudantes</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># para manejar los datos en formato tidy</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># para visualizar los datos</span></code></pre></div>
<p>Ahora cargamos los datos y los agregamos:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># cargamos los datos</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"puntuaciones"</span><span class="op">)</span> 

<span class="va">puntuaciones</span> <span class="op">&lt;-</span> <span class="va">puntuaciones</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">puntuaciones</span>, <span class="va">producto</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co"># pegar numero de observaciones de cada producto</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>producto_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">producto</span>, <span class="st">" (n = "</span>, <span class="va">n</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">producto_n</span>, <span class="va">puntuacion</span><span class="op">)</span> 

<span class="va">puntuaciones</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 390 x 2</span></span>
<span class="co">#&gt;    producto_n              puntuacion</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Yogur (n = 8)                    5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Yogur (n = 8)                    5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Yogur (n = 8)                    5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Yogur (n = 8)                    6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Yogur (n = 8)                    8</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Yogur (n = 8)                    5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Yogur (n = 8)                    9</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Yogur (n = 8)                    6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Salsa de tomate (n = 8)          6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Salsa de tomate (n = 8)          7</span>
<span class="co">#&gt; <span style="color: #949494;"># ... with 380 more rows</span></span></code></pre></div>
<p>Por último, visualizamos los datos:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># distribución de cada producto</span>
<span class="va">puntuaciones</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="co"># si hay mas de dos puntuaciones con el mismo </span>
  <span class="co"># valor con el mismo producto, hacer mas grandes</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">producto_n</span>, <span class="va">puntuacion</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">puntuacion</span>,
    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">producto_n</span>, <span class="va">puntuacion</span><span class="op">)</span> <span class="co"># ordenar productos de mejor a peor</span>
  <span class="op">)</span> <span class="op">+</span> 
  <span class="co"># linea vertical de referencia en 5</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>
    xintercept <span class="op">=</span> <span class="fl">5</span>, 
    colour <span class="op">=</span> <span class="st">"grey"</span>, 
    size <span class="op">=</span> <span class="fl">1</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="co"># puntuaciones individuales (cuantas mas puntuaciones iguales, mas grandes)</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">n</span><span class="op">)</span>, 
    stroke <span class="op">=</span> <span class="fl">0.5</span>, <span class="co"># borde del circulo mas delgado</span>
    colour <span class="op">=</span> <span class="st">"orange"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="co"># calcular media y error tipico de cada producto</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="external-link">stat_summary</a></span><span class="op">(</span>
    fun.data <span class="op">=</span> <span class="st">"mean_se"</span>,
    <span class="co"># queremos un circulo en la media y una barra de error para el error tipico</span>
    geom <span class="op">=</span> <span class="st">"pointrange"</span>,
    size <span class="op">=</span> <span class="fl">0.75</span>,
    shape <span class="op">=</span> <span class="fl">1</span>,
    stroke <span class="op">=</span> <span class="fl">1</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Puntuaci\u00f3n"</span>, 
    y <span class="op">=</span> <span class="st">"Producto"</span>, 
    colour <span class="op">=</span> <span class="st">"Intervalo de confianza"</span>,
    title <span class="op">=</span> <span class="st">"Puntuaci\u00f3n asignada a cada producto"</span>,
    subtitle <span class="op">=</span> <span class="st">"Los c\u00EDrculos naranjas y barras de error indican la media y error t\u00EDpico"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="co"># poner la leyenda en una sola linea (son dos por defecto)</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># poner limites al eje x</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>
    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.5</span>, <span class="fl">10</span><span class="op">)</span>,
    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="co"># personalizar tema de ggplot2 (?theme_comidistar)</span>
  <span class="fu"><a href="../reference/theme_comidistar.html">theme_comidistar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>
    <span class="co"># poner titulo a la izquierda del plot</span>
    plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,
    <span class="co"># eliminar titulo del eje Y</span>
    axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="co"># eliminar rejilla del eje Y</span>
    panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="co"># rejilla del eje X punteada y de color gris</span>
    panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>
      colour <span class="op">=</span> <span class="st">"grey"</span>,
      linetype <span class="op">=</span> <span class="st">"dotted"</span>
    <span class="op">)</span>,
    <span class="co"># poner leyenda arriba</span>
    legend.position <span class="op">=</span> <span class="st">"top"</span>
  <span class="op">)</span></code></pre></div>
<div class="figure">
<img src="puntuaciones_files/figure-html/puntuaciones-1.png" alt="Distribución de las puntuaciones de las catas a ciegas para cada producto. Distribución de las puntuaciones (eje X) de cada producto (eje Y). El punto y su intervalo (en negro) indican la media y el intervalos que contiene el 95\% de las puntuaciones de la distribución. Las líneas verticales dentro de cada distribuciu00f3n indican las puntuaciones individuales para cada marca, por parte de una de las personas del jurado." width="100%"><p class="caption">
Distribución de las puntuaciones de las catas a ciegas para cada producto. Distribución de las puntuaciones (eje X) de cada producto (eje Y). El punto y su intervalo (en negro) indican la media y el intervalos que contiene el 95% de las puntuaciones de la distribución. Las líneas verticales dentro de cada distribuciu00f3n indican las puntuaciones individuales para cada marca, por parte de una de las personas del jurado.
</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gonzalo Garcia-Castro.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
